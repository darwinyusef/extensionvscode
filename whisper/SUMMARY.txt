Whisper Microservice Architecture

Services:
  1. NATS - Message broker for real-time communication
  2. Whisper gRPC - Core transcription service
  3. API Gateway - REST interface + webhooks

Features:
  - Sync/Async transcription
  - Real-time status streaming via SSE
  - gRPC for inter-service communication
  - NATS for pub/sub messaging
  - Docker Compose orchestration
  - Health checks + monitoring
  - n8n webhook integration
  - Multiple audio format support

Structure:
  grpc_service/
    - server.py - gRPC server + Whisper
    - whisper.proto - Protocol definitions
    - Dockerfile
    - requirements.txt

  api_gateway/
    - main.py - FastAPI REST endpoints
    - grpc_client.py - gRPC client wrapper
    - monitoring.py - Metrics tracking
    - Dockerfile
    - requirements.txt

  examples/
    - full_client.py - Complete Python client
    - grpc_direct_client.py - Direct gRPC usage
    - nats_subscriber.py - NATS listener
    - fastapi_client.py - REST client
    - integration_test.py - Integration tests
    - load_test.py - Performance testing

  tests/
    - test_api.py - API tests
    - test_grpc.py - gRPC tests

  scripts/
    - benchmark.py - Performance benchmarks
    - generate_proto_all.bat - Proto generation

Communication Flow:
  1. Client -> API Gateway (REST)
  2. API Gateway -> gRPC Service (gRPC)
  3. gRPC Service -> NATS (Pub)
  4. NATS -> API Gateway (Sub)
  5. API Gateway -> Client (SSE)

n8n Integration:
  POST /webhook/n8n
  {
    "audio_url": "https://...",
    "task_id": "optional",
    "callback_url": "optional"
  }

FastAPI Integration:
  from examples.full_client import WhisperFullClient
  client = WhisperFullClient()
  result = await client.transcribe_sync("audio.mp3")
